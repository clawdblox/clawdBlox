{
  // MemoryWeave â€” OpenClaw Configuration
  // Docs: https://docs.openclaw.ai

  "identity": {
    "name": "MemoryWeave",
    "emoji": "ðŸ§ ",
    "theme": "NPC management assistant"
  },

  "agent": {
    "workspace": "/root/.openclaw/workspace",
    "model": {
      "primary": "anthropic/claude-sonnet-4-5",
      "fallback": "anthropic/claude-haiku-4-5",
      "onError": "The AI model is temporarily unavailable. Please try again in a moment."
    }
  },

  // === Channels ===
  "channels": {
    "discord": {
      "enabled": true,
      // Set DISCORD_BOT_TOKEN in env or uncomment:
      // "token": "${DISCORD_BOT_TOKEN}",

      "groupPolicy": "allowlist",

      "dm": {
        "enabled": true,
        "policy": "allowlist",
        "allowFrom": []  // Add Discord user IDs of authorized devs
      },

      "guilds": {
        // === Template Guild Configuration ===
        // Copy this block, replace YOUR_GUILD_ID with your Discord server ID,
        // and uncomment to activate.
        //
        // "YOUR_GUILD_ID": {
        //   "slug": "my-game-server",
        //   "requireMention": false,
        //
        //   "channels": {
        //     // --- Admin channel ---
        //     // Create a private channel for managing NPCs.
        //     // Only authorized devs should have access to this channel.
        //     "mw-admin": {
        //       "allow": true,
        //       "requireMention": false,
        //       "skills": ["memoryweave-admin"],
        //       "systemPrompt": "You are the MemoryWeave admin assistant. Help the game developer manage their NPCs, memories, routines, goals, relationships, and channel bindings."
        //     },
        //
        //     // --- NPC channel example ---
        //     // Create one channel per NPC character.
        //     // Bind NPCs to channels via: mw bind-channel <npc_id> discord <channel_id>
        //     // The NPC skill resolves the binding automatically at runtime.
        //     "tavern": {
        //       "allow": true,
        //       "requireMention": false,
        //       "skills": ["memoryweave-npc"],
        //       "systemPrompt": "You are a transparent message relay. For every user message, use the memoryweave-npc skill to resolve the bound NPC and return ONLY the NPC's response. Do not add commentary."
        //     },
        //
        //     // --- Add more NPC channels as needed ---
        //     // "blacksmith": {
        //     //   "allow": true,
        //     //   "requireMention": false,
        //     //   "skills": ["memoryweave-npc"],
        //     //   "systemPrompt": "You are a transparent message relay. For every user message, use the memoryweave-npc skill to resolve the bound NPC and return ONLY the NPC's response. Do not add commentary."
        //     // }
        //   }
        // }
      }
    },

    "telegram": {
      "enabled": true,
      "dmPolicy": "open",
      "groups": {
        "*": {
          "requireMention": false
        },
        "-1003773263458": {
          "groupPolicy": "open",
          "requireMention": false,
          "replyBehavior": "reply-to",
          "skills": ["memoryweave-npc"],
          "npcRouting": "slash-command"
        }
      }
    }
  },

  // === Rate Limiting (messages per minute) ===
  "rateLimit": {
    "perUser": {
      "maxPerMinute": 10,
      "cooldownSeconds": 5
    },
    "perChannel": {
      "maxPerMinute": 30,
      "cooldownSeconds": 2
    },
    // Channel-type overrides
    "admin": {
      "maxPerMinute": 20
    },
    "npc": {
      "maxPerMinute": 15,
      "cooldownSeconds": 3
    }
  },

  // === Sessions ===
  "session": {
    "dmScope": "per-channel-peer",
    "reset": {
      "mode": "daily",
      "atHour": 4
    }
  },

  // === Logging ===
  "logging": {
    "level": "info",           // error | warn | info | debug
    "destination": "stdout",   // stdout | file
    "includeTimestamps": true
  },

  // === Tools ===
  "tools": {
    "allow": ["exec", "read"],
    "exec": {
      "timeoutSec": 30
    }
  },

  // === Environment ===
  "env": {
    "MEMORYWEAVE_API_KEY": "${MEMORYWEAVE_API_KEY}",
    "MEMORYWEAVE_BASE_URL": "${MEMORYWEAVE_BASE_URL}",
    "PATH": "/root/.openclaw/workspace/scripts:${PATH}"
  }
}
